!function(r,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ecStat=t():r.ecStat=t()}(this,function(){return function(r){function t(e){if(n[e])return n[e].exports;var o=n[e]={exports:{},id:e,loaded:!1};return r[e].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=r,t.c=n,t.p="",t(0)}([function(r,t,n){r.exports={clustering:n(11),regression:n(13),statistics:n(14),histogram:n(12)}},function(r,t){function n(r){return r=null===r?NaN:+r,"number"==typeof r&&!isNaN(r)}function e(r){return isFinite(r)&&r===Math.round(r)}r.exports={isNumber:n,isInteger:e}},function(r,t,n){function e(r){if(!u(r))throw new Error("Invalid data type, you should input an array");var t=[],n=i(r);if(1===n.length)for(var e=0;e<n[0];e++)s(r[e])&&t.push(r[e]);else if(2===n.length)for(var e=0;e<n[0];e++){for(var o=!0,a=0;a<n[1];a++)s(r[e][a])||(o=!1);o&&t.push(r[e])}return t}function o(r){var t=r.toString(),n=t.indexOf(".");return n<0?0:t.length-1-n}var a=n(4),u=a.isArray,i=a.size,f=n(1),s=f.isNumber;r.exports={dataPreprocess:e,getPrecision:o}},function(r,t){r.exports=function(r,t){var n=r.length;if(!n)return 0;if(t<=0||n<2)return r[0];if(t>=1)return r[n-1];var e=(n-1)*t,o=Math.floor(e),a=r[o],u=r[o+1];return a+(u-a)*(e-o)}},function(r,t){function n(r){for(var t=[];e(r);)t.push(r.length),r=r[0];return t}function e(r){return"[object Array]"===h.call(r)}function o(r,t){for(var n=[],e=0;e<r;e++){n[e]=[];for(var o=0;o<t;o++)n[e][o]=0}return n}function a(r){for(var t=0,n=0;n<r.length;n++)t+=r[n];return t}function u(r,t){for(var n=0,e=0;e<r.length;e++)n+=r[e][t];return n}function i(r,t){return r>t?1:r<t?-1:r===t?0:NaN}function f(r,t,n,e){for(null==n&&(n=0),null==e&&(e=r.length);n<e;){var o=Math.floor((n+e)/2),a=i(r[o],t);if(a>0)e=o;else{if(!(a<0))return o+1;n=o+1}}return n}function s(r,t,n){if(r&&t){if(r.map&&r.map===c)return r.map(t,n);for(var e=[],o=0,a=r.length;o<a;o++)e.push(t.call(n,r[o],o,r));return e}}var h=Object.prototype.toString,l=Array.prototype,c=l.map;r.exports={size:n,isArray:e,zeros:o,sum:a,sumOfColumn:u,ascending:i,bisect:f,map:s}},function(r,t,n){var e=n(9);r.exports=function(r){var t=e(r);return t?Math.sqrt(t):t}},function(r,t,n){function e(r){for(var t=-(1/0),n=0;n<r.length;n++)a(r[n])&&r[n]>t&&(t=r[n]);return t}var o=n(1),a=o.isNumber;r.exports=e},function(r,t,n){function e(r){var t=r.length;return t?o(r)/r.length:0}var o=n(10);r.exports=e},function(r,t,n){function e(r){for(var t=1/0,n=0;n<r.length;n++)a(r[n])&&r[n]<t&&(t=r[n]);return t}var o=n(1),a=o.isNumber;r.exports=e},function(r,t,n){function e(r){var t=r.length;if(!t||t<2)return 0;if(r.length>=2){for(var n,e=u(r),o=0,i=0;i<r.length;i++)a(r[i])&&(n=r[i]-e,o+=n*n);return o/(r.length-1)}}var o=n(1),a=o.isNumber,u=n(7);r.exports=e},function(r,t,n){function e(r){var t=r.length;if(!t)return 0;for(var n=0,e=0;e<t;e++)a(r[e])&&(n+=r[e]);return n}var o=n(1),a=o.isNumber;r.exports=e},function(r,t,n){function e(r,t){for(var n,e,a,f,s=l(r),h=v(s[0],2),c=u(r,t),p=!0;p;){p=!1;for(var g=0;g<s[0];g++){n=1/0,e=-1;for(var M=0;M<t;M++)a=i(r[g],c[M]),a<n&&(n=a,e=M);h[g][0]!==e&&(p=!0),h[g][0]=e,h[g][1]=d(n,2)}for(var g=0;g<t;g++){f=[];for(var M=0;M<h.length;M++)h[M][0]===g&&f.push(r[M]);c[g]=o(f)}}var x={centroids:c,clusterAssigned:h};return x}function o(r){for(var t,n,e=l(r),o=[],a=0;a<e[1];a++){t=0;for(var u=0;u<e[0];u++)t+=r[u][a];n=t/e[0],o.push(n)}return o}function a(r,t,n){function a(){if(E<t){y=1/0;for(var r,n,o,a=0;a<x.length;a++){b=[],w=[];for(var u=0;u<g.length;u++)g[u][0]===a?b.push(f[u]):w.push(g[u][1]);N=e(b,2),A=c(N.clusterAssigned,1),q=p(w),A+q<y&&(y=q+A,r=a,n=N.centroids,o=N.clusterAssigned)}for(var u=0;u<o.length;u++)0===o[u][0]?o[u][0]=r:1===o[u][0]&&(o[u][0]=x.length);for(x[r]=n[0],x.push(n[1]),u=0,a=0;u<g.length&&a<o.length;u++)g[u][0]===r&&(g[u][0]=o[a][0],g[u][1]=o[a++][1]);for(var i=[],u=0;u<x.length;u++){i[u]=[];for(var a=0;a<g.length;a++)g[a][0]===u&&i[u].push(f[a])}P.clusterAssment=g,P.centroids=x,P.pointsInCluster=i,E++}else P.isEnd=!0;return P}for(var u,f=s(r),h=l(f),g=v(h[0],2),M=o(f),x=[M],m=0;m<h[0];m++)u=i(f[m],M),g[m][1]=d(u,2);var y,b,w,N,A,q,E=1,P={isEnd:!1},j={next:a};if(n)return j;for(var P;!(P=j.next()).isEnd;);return P}function u(r,t){for(var n,e,o,a=l(r),u=v(t,a[1]),i=0;i<a[1];i++){n=r[0][i],e=r[0][i];for(var f=1;f<a[0];f++)r[f][i]<n&&(n=r[f][i]),r[f][i]>e&&(e=r[f][i]);o=e-n;for(var f=0;f<t;f++)u[f][i]=n+o*Math.random()}return u}function i(r,t){if(!g(r)&&!g(t))return M(d(r-t,2));for(var n=0,e=0;e<r.length;e++)n+=d(r[e]-t[e],2);return M(n)}var f=n(2),s=f.dataPreprocess,h=n(4),l=h.size,c=h.sumOfColumn,p=h.sum,v=h.zeros,g=h.isArray,M=Math.sqrt,d=Math.pow;r.exports={kMeans:e,hierarchicalKMeans:a}},function(r,t,n){function e(r,t){t=null==t?M.squareRoot:M[t];for(var n=s(r),e=o(n),u=a(n),i=t(n,u,e),f=g(u,e,i),h=p(Math.ceil(u/f)*f,Math.floor(e/f)*f,f),l=h.length,d=new Array(l+1),x=0;x<=l;x++)d[x]={},d[x].sample=[],d[x].x0=x>0?h[x-1]:h[x]-u===f?u:h[x]-f,d[x].x1=x<l?h[x]:e-h[x-1]===f?e:h[x-1]+f;for(var x=0;x<n.length;x++)u<=n[x]&&n[x]<=e&&d[v(h,n[x],0,l)].sample.push(n[x]);var r=c(d,function(r){return[(r.x0+r.x1)/2,r.sample.length]});return{bins:d,data:r}}var o=n(6),a=n(8),u=n(3),i=n(5),f=n(2),s=f.dataPreprocess,h=n(4),l=h.ascending,c=h.map,p=n(16),v=h.bisect,g=n(17),M={squareRoot:function(r){var t=Math.ceil(Math.sqrt(r.length));return t>50?50:t},scott:function(r,t,n){return Math.ceil((n-t)/(3.5*i(r)*Math.pow(r.length,-1/3)))},freedmanDiaconis:function(r,t,n){return r.sort(l),Math.ceil((n-t)/(2*(u(r,.75)-u(r,.25))*Math.pow(r.length,-1/3)))},sturges:function(r){return Math.ceil(Math.log(r.length)/Math.LN2)+1}};r.exports=e},function(r,t,n){function e(r,t){for(var n=0;n<r.length-1;n++){for(var e=n,o=n+1;o<r.length-1;o++)Math.abs(r[n][o])>Math.abs(r[n][e])&&(e=o);for(var a=n;a<r.length;a++){var u=r[a][n];r[a][n]=r[a][e],r[a][e]=u}for(var i=n+1;i<r.length-1;i++)for(var f=r.length-1;f>=n;f--)r[f][i]-=r[f][n]/r[n][n]*r[n][i]}for(var s=new Array(t),h=r.length-1,o=r.length-2;o>=0;o--){for(var u=0,n=o+1;n<r.length-1;n++)u+=r[n][o]*s[n];s[o]=(r[h][o]-u)/r[o][o]}return s}var o=n(2),a=o.dataPreprocess,u={linear:function(r){for(var t=a(r),n=0,e=0,o=0,u=0,i=t.length,f=0;f<i;f++)n+=t[f][0],e+=t[f][1],o+=t[f][0]*t[f][1],u+=t[f][0]*t[f][0];for(var s=(i*o-n*e)/(i*u-n*n),h=e/i-s*n/i,l=[],c=0;c<t.length;c++){var p=[t[c][0],s*t[c][0]+h];l.push(p)}var v="y = "+Math.round(100*s)/100+"x + "+Math.round(100*h)/100;return{points:l,parameter:{gradient:s,intercept:h},expression:v}},linearThroughOrigin:function(r){for(var t=a(r),n=0,e=0,o=0;o<t.length;o++)n+=t[o][0]*t[o][0],e+=t[o][0]*t[o][1];for(var u=e/n,i=[],f=0;f<t.length;f++){var s=[t[f][0],t[f][0]*u];i.push(s)}var h="y = "+Math.round(100*u)/100+"x";return{points:i,parameter:{gradient:u},expression:h}},exponential:function(r){for(var t=a(r),n=0,e=0,o=0,u=0,i=0,f=0,s=0;s<t.length;s++)n+=t[s][0],e+=t[s][1],f+=t[s][0]*t[s][1],o+=t[s][0]*t[s][0]*t[s][1],u+=t[s][1]*Math.log(t[s][1]),i+=t[s][0]*t[s][1]*Math.log(t[s][1]);for(var h=e*o-f*f,l=Math.pow(Math.E,(o*u-f*i)/h),c=(e*i-f*u)/h,p=[],v=0;v<t.length;v++){var g=[t[v][0],l*Math.pow(Math.E,c*t[v][0])];p.push(g)}var M="y = "+Math.round(100*l)/100+"e^("+Math.round(100*c)/100+"x)";return{points:p,parameter:{coefficient:l,index:c},expression:M}},logarithmic:function(r){for(var t=a(r),n=0,e=0,o=0,u=0,i=0;i<t.length;i++)n+=Math.log(t[i][0]),e+=t[i][1]*Math.log(t[i][0]),o+=t[i][1],u+=Math.pow(Math.log(t[i][0]),2);for(var f=(i*e-o*n)/(i*u-n*n),s=(o-f*n)/i,h=[],l=0;l<t.length;l++){var c=[t[l][0],f*Math.log(t[l][0])+s];h.push(c)}var p="y = "+Math.round(100*s)/100+" + "+Math.round(100*f)/100+"ln(x)";return{points:h,parameter:{gradient:f,intercept:s},expression:p}},polynomial:function(r,t){var n=a(r);"undefined"==typeof t&&(t=2);for(var o=[],u=[],i=t+1,f=0;f<i;f++){for(var s=0,h=0;h<n.length;h++)s+=n[h][1]*Math.pow(n[h][0],f);u.push(s);for(var l=[],c=0;c<i;c++){for(var p=0,v=0;v<n.length;v++)p+=Math.pow(n[v][0],f+c);l.push(p)}o.push(l)}o.push(u);for(var g=e(o,i),M=[],f=0;f<n.length;f++){for(var d=0,h=0;h<g.length;h++)d+=g[h]*Math.pow(n[f][0],h);M.push([n[f][0],d])}for(var x="y = ",f=g.length-1;f>=0;f--)x+=f>1?Math.round(g[f]*Math.pow(10,f+1))/Math.pow(10,f+1)+"x^"+f+" + ":1===f?Math.round(100*g[f])/100+"x + ":Math.round(100*g[f])/100;return{points:M,parameter:g,expression:x}}},i=function(r,t,n){return u[r](t,n)};r.exports=i},function(r,t,n){var e={};e.max=n(6),e.deviation=n(5),e.mean=n(7),e.median=n(15),e.min=n(8),e.max=n(3),e.max=n(9),e.sum=n(10),r.exports=e},function(r,t,n){function e(r){return o(r,.5)}var o=n(3);r.exports=e},function(r,t,n){var e=n(2),o=e.getPrecision;r.exports=function(r,t,n){var e=arguments.length;e<2?(t=r,r=0,n=1):n=e<3?1:+n;for(var a=Math.ceil((t-r)/n),u=new Array(a+1),i=o(r),f=o(n),s=Math.max(i,f),h=0;h<a+1;h++)u[h]=+(r+h*n).toFixed(s);return u}},function(r,t){r.exports=function(r,t,n){var e=Math.abs(t-r)/n,o=Math.pow(10,Math.floor(Math.log(e)/Math.LN10)),a=e/o;return a>=Math.sqrt(50)?o*=10:a>=Math.sqrt(10)?o*=5:a>=Math.sqrt(2)&&(o*=2),t>=r?o:-o}}])});